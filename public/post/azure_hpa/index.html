<!DOCTYPE html>
<html><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>AKS Pod Horizontal Scaling based on requests - Thoughts &amp; Learnings</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="It is a common requirement to scale applications deployed on Kubernetes. This post targets on how to leverage Azure built in features to configure horizontal pod autoscaling. Usually, the infrastrucre is setup with a mointoring system such as https://prometheus.io/ [prometheus] and configure custom metric scraping from the applications. However, the focus for this post is to explore the default capabilities provided by Azure platform to achieve horizontal pod scaling." />
	<meta property="og:image" content=""/>
	<meta property="og:title" content="AKS Pod Horizontal Scaling based on requests" />
<meta property="og:description" content="It is a common requirement to scale applications deployed on Kubernetes. This post targets on how to leverage Azure built in features to configure horizontal pod autoscaling. Usually, the infrastrucre is setup with a mointoring system such as https://prometheus.io/ [prometheus] and configure custom metric scraping from the applications. However, the focus for this post is to explore the default capabilities provided by Azure platform to achieve horizontal pod scaling." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/post/azure_hpa/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-09-14T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-09-14T00:00:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="AKS Pod Horizontal Scaling based on requests"/>
<meta name="twitter:description" content="It is a common requirement to scale applications deployed on Kubernetes. This post targets on how to leverage Azure built in features to configure horizontal pod autoscaling. Usually, the infrastrucre is setup with a mointoring system such as https://prometheus.io/ [prometheus] and configure custom metric scraping from the applications. However, the focus for this post is to explore the default capabilities provided by Azure platform to achieve horizontal pod scaling."/>
<script src="http://localhost:1313/js/feather.min.js"></script>
	
	
        <link href="http://localhost:1313/css/fonts.b685ac6f654695232de7b82a9143a46f9e049c8e3af3a21d9737b01f4be211d1.css" rel="stylesheet">
	

	
	<link rel="stylesheet" type="text/css" media="screen" href="http://localhost:1313/css/main.d1574b43a51792a446cd761d6f9b1c9abb39ed2c36ca6984f74aef729eb9f245.css" />
		<link id="darkModeStyle" rel="stylesheet" type="text/css" href="http://localhost:1313/css/dark.726cd11ca6eb7c4f7d48eb420354f814e5c1b94281aaf8fd0511c1319f7f78a4.css"  disabled />
	
	
	
</head>
<body>
        <div class="content"><header>
	<div class="main">
		<a href="http://localhost:1313/">Thoughts &amp; Learnings</a>
	</div>
	<nav>
		
		<a href="/">Home</a>
		
		<a href="/posts">All posts</a>
		
		<a href="/about">About</a>
		
		<a href="/tags">Tags</a>
		
		| <a id="dark-mode-toggle" onclick="toggleTheme()" href=""></a>
		<script src="http://localhost:1313/js/themetoggle.js"></script>
		
	</nav>
</header>

<main>
	<article>
		<div class="title">
			<h1 class="title">AKS Pod Horizontal Scaling based on requests</h1>
			<div class="meta">Posted on Sep 14, 2022</div>
		</div>
		

		<section class="body">
			
<p>
It is a common requirement to scale applications deployed on Kubernetes. This post targets on how to leverage Azure built in features to configure horizontal pod autoscaling. Usually, the infrastrucre is setup with a mointoring system such as <a href="https://prometheus.io/">https://prometheus.io/</a> [prometheus] and configure custom metric scraping from the applications. However, the focus for this post is to explore the default capabilities provided by Azure platform  to achieve horizontal pod scaling.</p>
<p>
<a href="https://keda.sh/">https://keda.sh/</a> [Keda] is an excellent opensource initiative and part of CCNF which will be used in this blog post.</p>
<p>
Install Keda on your AKS cluster</p>
<div class="src src-shell">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>kubectl apply -f https://github.com/kedacore/keda/releases/download/v2.8.0/keda-2.8.0.yaml</span></span></code></pre></div>
</div>
<p>
Create Keda Secret, TriggerAuthetication, ScaledObject</p>
<div class="src src-shell">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>kubectl apply -f https://raw.githubusercontent.com/udayblog/public_cloud/main/azure/aks/keda/hpa.yml</span></span></code></pre></div>
</div>
<p>
Trigger query specified in the ScaledObject will monitor the requests coming to Azure Application Gateway in five minutes intervals. Once those requests exceed the threshold value which is set as 10 in the query, then HPA will scale pods.</p>
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
Sample heading
</h2>
</div>

		</section>

		<div class="post-tags">
			
			
			<nav class="nav tags">
				<ul class="tags">
					
					<li><a href="/tags/azure">azure,</a></li>
					
					<li><a href="/tags/keda">keda,</a></li>
					
					<li><a href="/tags/containers">containers,</a></li>
					
					<li><a href="/tags/kubernetes">kubernetes</a></li>
					
				</ul>
			</nav>
			
			
		</div>
	</article>
</main>
<footer>
  <div style="display:flex"><a class="soc" href="https://github.com/udayblog" title="GitHub"><i data-feather="github"></i></a>
    <a class="border"></a><a class="soc" href="" title="Twitter"><i data-feather="twitter"></i></a>
    <a class="border"></a></div>
  <div class="footer-info">
    2022  Â© Uday |  <a
      href="https://github.com/athul/archie">Archie Theme</a> | Built with <a href="https://gohugo.io">Hugo</a>
  </div>
</footer>
<script>
  feather.replace()
</script></div>
    </body>
</html>
